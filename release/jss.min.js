/** 
 * jss - v0.1.0 
 * Create Date -2017-03-23 14:30:23
 * Copyright (c) 2017 jerry; Licensed GPLv2 
 */
var jsstpls = {};

jsstpls["tpl/loading"] = "";

if (typeof JSON !== "object") {
    JSON = {};
}

(function () {
    "use strict";

    var rx_one = /^[\],:{}\s]*$/;
    var rx_two = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;
    var rx_three = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;
    var rx_four = /(?:^|:|,)(?:\s*\[)+/g;
    var rx_escapable = /[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
    var rx_dangerous = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;

    function f(n) {
        // Format integers to have at least two digits.
        return n < 10
            ? "0" + n
            : n;
    }

    function this_value() {
        return this.valueOf();
    }

    if (typeof Date.prototype.toJSON !== "function") {

        Date.prototype.toJSON = function () {

            return isFinite(this.valueOf())
                ? this.getUTCFullYear() + "-" +
                        f(this.getUTCMonth() + 1) + "-" +
                        f(this.getUTCDate()) + "T" +
                        f(this.getUTCHours()) + ":" +
                        f(this.getUTCMinutes()) + ":" +
                        f(this.getUTCSeconds()) + "Z"
                : null;
        };

        Boolean.prototype.toJSON = this_value;
        Number.prototype.toJSON = this_value;
        String.prototype.toJSON = this_value;
    }

    var gap;
    var indent;
    var meta;
    var rep;


    function quote(string) {

// If the string contains no control characters, no quote characters, and no
// backslash characters, then we can safely slap some quotes around it.
// Otherwise we must also replace the offending characters with safe escape
// sequences.

        rx_escapable.lastIndex = 0;
        return rx_escapable.test(string)
            ? "\"" + string.replace(rx_escapable, function (a) {
                var c = meta[a];
                return typeof c === "string"
                    ? c
                    : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
            }) + "\""
            : "\"" + string + "\"";
    }


    function str(key, holder) {

// Produce a string from holder[key].

        var i;          // The loop counter.
        var k;          // The member key.
        var v;          // The member value.
        var length;
        var mind = gap;
        var partial;
        var value = holder[key];

// If the value has a toJSON method, call it to obtain a replacement value.

        if (value && typeof value === "object" &&
                typeof value.toJSON === "function") {
            value = value.toJSON(key);
        }

// If we were called with a replacer function, then call the replacer to
// obtain a replacement value.

        if (typeof rep === "function") {
            value = rep.call(holder, key, value);
        }

// What happens next depends on the value's type.

        switch (typeof value) {
        case "string":
            return quote(value);

        case "number":

// JSON numbers must be finite. Encode non-finite numbers as null.

            return isFinite(value)
                ? String(value)
                : "null";

        case "boolean":
        case "null":

// If the value is a boolean or null, convert it to a string. Note:
// typeof null does not produce "null". The case is included here in
// the remote chance that this gets fixed someday.

            return String(value);

// If the type is "object", we might be dealing with an object or an array or
// null.

        case "object":

// Due to a specification blunder in ECMAScript, typeof null is "object",
// so watch out for that case.

            if (!value) {
                return "null";
            }

// Make an array to hold the partial results of stringifying this object value.

            gap += indent;
            partial = [];

// Is the value an array?

            if (Object.prototype.toString.apply(value) === "[object Array]") {

// The value is an array. Stringify every element. Use null as a placeholder
// for non-JSON values.

                length = value.length;
                for (i = 0; i < length; i += 1) {
                    partial[i] = str(i, value) || "null";
                }

// Join all of the elements together, separated with commas, and wrap them in
// brackets.

                v = partial.length === 0
                    ? "[]"
                    : gap
                        ? "[\n" + gap + partial.join(",\n" + gap) + "\n" + mind + "]"
                        : "[" + partial.join(",") + "]";
                gap = mind;
                return v;
            }

// If the replacer is an array, use it to select the members to be stringified.

            if (rep && typeof rep === "object") {
                length = rep.length;
                for (i = 0; i < length; i += 1) {
                    if (typeof rep[i] === "string") {
                        k = rep[i];
                        v = str(k, value);
                        if (v) {
                            partial.push(quote(k) + (
                                gap
                                    ? ": "
                                    : ":"
                            ) + v);
                        }
                    }
                }
            } else {

// Otherwise, iterate through all of the keys in the object.

                for (k in value) {
                    if (Object.prototype.hasOwnProperty.call(value, k)) {
                        v = str(k, value);
                        if (v) {
                            partial.push(quote(k) + (
                                gap
                                    ? ": "
                                    : ":"
                            ) + v);
                        }
                    }
                }
            }

// Join all of the member texts together, separated with commas,
// and wrap them in braces.

            v = partial.length === 0
                ? "{}"
                : gap
                    ? "{\n" + gap + partial.join(",\n" + gap) + "\n" + mind + "}"
                    : "{" + partial.join(",") + "}";
            gap = mind;
            return v;
        }
    }

// If the JSON object does not yet have a stringify method, give it one.

    if (typeof JSON.stringify !== "function") {
        meta = {    // table of character substitutions
            "\b": "\\b",
            "\t": "\\t",
            "\n": "\\n",
            "\f": "\\f",
            "\r": "\\r",
            "\"": "\\\"",
            "\\": "\\\\"
        };
        JSON.stringify = function (value, replacer, space) {

// The stringify method takes a value and an optional replacer, and an optional
// space parameter, and returns a JSON text. The replacer can be a function
// that can replace values, or an array of strings that will select the keys.
// A default replacer method can be provided. Use of the space parameter can
// produce text that is more easily readable.

            var i;
            gap = "";
            indent = "";

// If the space parameter is a number, make an indent string containing that
// many spaces.

            if (typeof space === "number") {
                for (i = 0; i < space; i += 1) {
                    indent += " ";
                }

// If the space parameter is a string, it will be used as the indent string.

            } else if (typeof space === "string") {
                indent = space;
            }

// If there is a replacer, it must be a function or an array.
// Otherwise, throw an error.

            rep = replacer;
            if (replacer && typeof replacer !== "function" &&
                    (typeof replacer !== "object" ||
                    typeof replacer.length !== "number")) {
                throw new Error("JSON.stringify");
            }

// Make a fake root object containing our value under the key of "".
// Return the result of stringifying the value.

            return str("", {"": value});
        };
    }


// If the JSON object does not yet have a parse method, give it one.

    if (typeof JSON.parse !== "function") {
        JSON.parse = function (text, reviver) {

// The parse method takes a text and an optional reviver function, and returns
// a JavaScript value if the text is a valid JSON text.

            var j;

            function walk(holder, key) {

// The walk method is used to recursively walk the resulting structure so
// that modifications can be made.

                var k;
                var v;
                var value = holder[key];
                if (value && typeof value === "object") {
                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = walk(value, k);
                            if (v !== undefined) {
                                value[k] = v;
                            } else {
                                delete value[k];
                            }
                        }
                    }
                }
                return reviver.call(holder, key, value);
            }


// Parsing happens in four stages. In the first stage, we replace certain
// Unicode characters with escape sequences. JavaScript handles many characters
// incorrectly, either silently deleting them, or treating them as line endings.

            text = String(text);
            rx_dangerous.lastIndex = 0;
            if (rx_dangerous.test(text)) {
                text = text.replace(rx_dangerous, function (a) {
                    return "\\u" +
                            ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
                });
            }

// In the second stage, we run the text against regular expressions that look
// for non-JSON patterns. We are especially concerned with "()" and "new"
// because they can cause invocation, and "=" because it can cause mutation.
// But just to be safe, we want to reject all unexpected forms.

// We split the second stage into 4 regexp operations in order to work around
// crippling inefficiencies in IE's and Safari's regexp engines. First we
// replace the JSON backslash pairs with "@" (a non-JSON character). Second, we
// replace all simple value tokens with "]" characters. Third, we delete all
// open brackets that follow a colon or comma or that begin the text. Finally,
// we look to see that the remaining characters are only whitespace or "]" or
// "," or ":" or "{" or "}". If that is so, then the text is safe for eval.

            if (
                rx_one.test(
                    text
                        .replace(rx_two, "@")
                        .replace(rx_three, "]")
                        .replace(rx_four, "")
                )
            ) {

// In the third stage we use the eval function to compile the text into a
// JavaScript structure. The "{" operator is subject to a syntactic ambiguity
// in JavaScript: it can begin a block or an object literal. We wrap the text
// in parens to eliminate the ambiguity.

                j = eval("(" + text + ")");

// In the optional fourth stage, we recursively walk the new structure, passing
// each name/value pair to a reviver function for possible transformation.

                return (typeof reviver === "function")
                    ? walk({"": j}, "")
                    : j;
            }

// If the text is not JSON parseable, then a SyntaxError is thrown.

            throw new SyntaxError("JSON.parse");
        };
    }
}());
(function(){
	_jss = window.jss =function(name){
		if(typeof name === 'object' && name.isJss){
			//jss对象传入时直接返回
			return name;
		}else{
			return _jss.fn.selector(name);
		}
	}
	_jss.fn = jss.prototype;
})();
_jss.fn.addClass = function(arr, newclass){
	if(!this.isCollection(arr)){
	    arr = [arr];
	}
	for(var i = 0; i<arr.length; i++){
	    var entity = arr[i];
	    var boo = this.hasClass(entity, newclass);
	    if(!boo){
	        entity.className +=" "+newclass;
	    }
	}

}
_jss.fn.addStyleSheet = function(cssId, cssText){
	// 标记设置过的样式 【注】每个cssId对应的样式表只能设置一次
	if(!window['_style_sheet_stores']){
		window['_style_sheet_stores'] = {};
	}
	if(window['_style_sheet_stores'][cssId]){
		// 设置过的不再进行设置
		return ;
	}
	window['_style_sheet_stores'][cssId] = true;

	var _this = this; 
	var head  = document.getElementsByTagName('head').item(0);
	var	style =	head.getElementsByTagName("style");

	// 在 head 中创建 style 标签来存放样式表
	if(!style || style && !style.length){
		if(document.createStyleSheet){
            document.createStyleSheet(); // ie 在head中生成一个style标签
        }else{
            var st = document.createElement('style'); //w3c
	            st.setAttribute("type", "text/css");
	            head.appendChild(st);
        }
	};

	// 添加样式表
	var ss = head.getElementsByTagName("style").item(0);
	if(ss.styleSheet){    //ie
        ss.styleSheet.cssText += cssText;
    }else if(document.getBoxObjectFor){
        ss.innerHTML += cssText; //火狐支持直接innerHTML添加样式表字串
    }else{
        ss.appendChild(document.createTextNode(cssText));
    }
	
}
/*
 * 将css样式json对象转成样式字符串
 * @param className 类名 如： body .list
 * @param cssJson 样式json对象
 * return 样式表 如： body{width:100px;}
 */
_jss.fn.toCssText = function(className, cssJson){
	var r = className+"{";
	for(var key in cssJson){
		r += key+":"+cssJson[key]+";";
	}
	r+="}";
	return r;
}
_jss.fn.ajax = function(opt){
	var xmlhttp;
	//1.
	if (window.XMLHttpRequest) {
	    try {
	        xmlhttp = new XMLHttpRequest();
	        if( xmlhttp.overrideMimeType ){
			    xmlhttp.overrideMimeType("text/html; charset=UTF-8");
			}
	    } catch(e) {}
	} else if (window.ActiveXObject) {
	    try {
	        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	    } catch(e) {
	        try {
	            xmlhttp = new ActiveXObject("Msxml2.XMLHttp");
	        } catch(e) {
	            try {
	                xmlhttp = new ActiveXObject("Msxml3.XMLHttp");
	            } catch(e) {}
	        }
	    }
	}
	//2.
	xmlhttp.onreadystatechange = function() {
	    if (xmlhttp.readyState == 4) { //readystate 为4即数据传输结束
	    	var r = "";
	        try {
	            if (xmlhttp.status == 200) {
	            	var result = xmlhttp.responseText;
	            	try{
	            		//默认返回值为JSON数据
	            		result = JSON.parse(result);
	            	}catch(e){
	            		// e todo
	            	}
	                opt.success && opt.success.call(this, result);
	            } else {
	                opt.error && opt.error.call(this, xmlhttp);
	            }
	        } catch(e) {
	            opt.error && opt.error.call(this, e);
	        }
	    }
	}
	
	//构造请求参数
	var param = "";
	if(opt.data){
		for(var key in opt.data){
			param += (key + "=" + opt.data[key] + "&");
		}
		param = param.substring(0, param.length-1);
	}
	//构造GET请求
	var metch = opt.type || 'GET';
	var sendParam = null;
	if(metch === "GET" && param){
		opt.url += ('?' + param);
	}else{
		//POST 请求参数
		sendParam = JSON.stringify(opt.data);
	}
	//3.
	var isAsync = true;  //缺省为异步请求
	if(opt.async === false || opt.async === "false"){
		isAsync = false;
	}
	xmlhttp.open(metch, opt.url, isAsync);
	if(metch === "POST"){
		// xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
		xmlhttp.setRequestHeader("Content-Type","application/json;charset=UTF-8");
	}
	//设置请求头
	if(opt.header){
		for(var key in opt.header){
			xmlhttp.setRequestHeader(key, opt.header[key]);
		}
	}
	xmlhttp.send(sendParam); 

}
_jss.fn.append = function(result, obj){
	if(typeof obj == 'string'){
		obj = document.createTextNode(obj);
	}
	if(!this.isCollection(obj)){
        obj = [obj];
    }
    for(var i = 0; i<obj.length; i++){
    	result.appendChild(obj[i]);
    }
	return obj;
}
_jss.fn.setAttr = function(result, params){
	//设置
	if(params && !this.isCollection(result)){
        result = [result];
    }
    for(var i = 0; i<result.length; i++){
        var o = result[i];
        add(o);
    }
    function add(o){
        for(var key in params){
            if(key == "style"){
                o.style.cssText = params[key];
            }else if(key == "class"){
                o.className = params[key];
            }else{
                o.setAttribute(key, params[key]);
            }
        }
    }
}
/*
 * 获取元素属性
 * @param result dom对象
 * @param attrName 属性名
 */
_jss.fn.getAttr = function(result, attrName){
	//获取
	if(attrName == "class"){
        return result.className;
    }else if(attrName == "style"){
        return result.style.cssText;
    }else{
        return result.getAttribute(attrName);
    }
}
_jss.fn.children = function(result){
	var r = [],nodes = result.childNodes;
	for(var i=0; i<nodes.length; i++) {
		if(nodes[i].tagName) r.push(nodes[i]);
	}
	return r;
}
_jss.fn.clientRect = function(entity){
	return entity.getBoundingClientRect();
}

_jss.fn.clone = function(json){
	var r = {};
	for(var key in json){
		r[key] = json[key];
	}
	return r;
}

_jss.fn.constant = {
	/*
     * 1px 背景透明png图片
	 */
	pngBase64: 'data:image/png;base64,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'
};
_jss.fn.setCookie = function (name, value, expiredays) {
    var todayDate = new Date();
    todayDate.setTime(todayDate.getTime() + expiredays);
    document.cookie = name + "=" + escape(value) + "; path=/; expires=" + todayDate.toGMTString() + ";"
}
/**
*+----------------------------------------------------
*|cookie获取
*+----------------------------------------------------
*| @param name cookie名
*+----------------------------------------------------
*/
_jss.fn.getCookie = function (name) {
    var nameOfCookie = name + "=";
    var x = 0;
    while (x <= document.cookie.length) {
        var y = (x + nameOfCookie.length);
        if (document.cookie.substring(x, y) == nameOfCookie) {
            if ((endOfCookie = document.cookie.indexOf(";", y)) == -1)
                endOfCookie = document.cookie.length;
            return unescape(document.cookie.substring(y, endOfCookie));
        }
        x = document.cookie.indexOf(" ", x) + 1;
        if (x == 0)
            break;
    }
    return "";
}
_jss.fn.createElementByTagName = function(elementName){
	var r = null;
	//兼容处理SVG元素创建
	if(elementName == "svg" || 
		elementName == "rect" ||
		elementName == "circle" ||
		elementName == "ellipse" ||
		elementName == "line" ||
		elementName == "polyline" ||
		elementName == "polygon" || 
		elementName == "path"){

		r = document.createElementNS('http://www.w3.org/2000/svg',elementName);
	}else{

		r = document.createElement(elementName);
	}	
	return r;	
}
_jss.fn.css = function(arr, cssProperty){
	if(!this.isCollection(arr)){
	    arr = [arr];
	}
	for(var i = 0; i<arr.length; i++){
		var element = arr[i];
		if(typeof cssProperty === 'string'){
			//获取样式
			var  xr = "",elm_style = element.currentStyle || window.getComputedStyle(element, null);
			if (elm_style.getPropertyValue) {
				// 处理非IE
				xr = elm_style.getPropertyValue(cssProperty);
			} else {
				// 处理IE
				if(cssProperty=="float")cssProperty = "styleFloat";
				// 将带有'-'样式属性转成驼峰写法 border-color <--> borderColor
				cssProperty = cssProperty.replace(/(\-+)\w/g, function(s) {
					// 将'-'字符后的字母大写
					return s.toUpperCase();
				}).replace("-", "");
				xr = elm_style.getAttribute(cssProperty);
			}
			// 将可用的值返回
			return xr ? xr : elm_style[cssProperty] ? elm_style[cssProperty]	: element.style[cssProperty];
		}else if(typeof cssProperty === 'object'){
			//设置样式
			for(var key in cssProperty) {
				element.style[key] = cssProperty[key];
			}
		}
	}

}
_jss.fn.dialog = function(config, entity) {
	var _this = this,
		di = {};
	// 被遮罩弹窗的元素
	config = config || {};
	entity = entity || document.body;

	// 创建需要的元素
	var bg = document.createElement('div');
	var panel = document.createElement('div');
	var header = document.createElement('div');
	var content = document.createElement('div');
	var footer = document.createElement('div');
	var btncancel = document.createElement('button');
	var btnprimary = document.createElement('button');

	// 设置样式名
	bg.className = 'jss-dialog-bg';
	panel.className = 'jss-dialog-panel';
	header.className = 'jss-dialog-header';
	content.className = 'jss-dialog-content';
	footer.className = 'jss-dialog-footer';
	btncancel.className = 'jss-dialog-btncancel';
	btnprimary.className = 'jss-dialog-btnprimary';

	// 设置背景样式
	var bgcss = {
		width: '100%',
		height: '100%',
		position: config.position || 'fixed',
		zIndex: config.zIndex || '99999',
		top: "0",
		left: "0",
		background: "url('" + _this.constant.pngBase64 + "') left top repeat"
	};
	// 设置面板样式
	var panelcss = {
		width: config.contentWidth || '50%',
		height: 'auto',
		minHeight: '50px',
		overflow: 'hidden',
		margin: (config.contentTop || '30px') + ' auto 0',
		position: 'relative',
		backgroundColor: '#fff',
		backgroundClip: 'padding-box',
		border: config.hasborder != false ? '1px solid #999' : '0px',
		border: config.hasborder != false ? '1px solid #ccc' : '0px',
		borderRadius: (config.hasBorderRadius != false) ? '6px' : '0px',
		outline: 0
	};
	// 设置弹窗头部样式
	var headercss = {
		padding: '15px',
		fontSize: '24px',
		lineHeight: 1.42857143,
		fontWeight: 500,
		display: (config.showHeader != false) ? 'block' : 'none',
		borderBottom: '1px solid #e5e5e5'
	};
	// 设置弹窗底部样式
	var footercss = {
		padding: '15px',
		textAlign: 'right',
		display: (config.showFooter != false) ? 'block' : 'none',
		borderTop: '1px solid #e5e5e5'
	};
	// 设置弹窗底部取消按钮样式
	var btncancelcss = {
		color: '#fff',
		backgroundColor: '#f0ad4e',
		borderColor: '#eea236',
		display: 'inline-block',
		outline: 'none',
		padding: '6px 12px',
		marginBottom: 0,
		marginLeft: '5px',
		fontSize: '14px',
		fontWeight: 400,
		lineHeight: 1.42857143,
		textAlign: 'center',
		whiteSpace: 'nowrap',
		verticalAlign: 'middle',
		'-msTouchAction': 'manipulation',
		touchAction: 'manipulation',
		cursor: 'pointer',
		'-webkit-user-select': 'none',
		'-moz-user-select': 'none',
		'-ms-user-select': 'none',
		userSelect: 'none',
		backgroundImage: 'none',
		border: '1px solid transparent',
		borderRadius: '4px'
	};
	// 设置弹窗底部确定按钮样式
	btnprimarycss = this.clone(btncancelcss);
	btnprimarycss['backgroundColor'] = '#337ab7';
	btnprimarycss['borderColor'] = '#2e6da4';
	// 设置弹窗内容样式
	var contentcss = {
		position: 'relative',
		margin: 0,
		padding: 0,
		minHeight: '50px'
	};

	this.css(bg, bgcss);
	this.css(panel, panelcss);
	this.css(header, headercss);
	this.css(content, contentcss);
	this.css(footer, footercss);
	this.css(btncancel, btncancelcss);
	this.css(btnprimary, btnprimarycss);

	// 设置内容
	header.innerHTML = config.headerHtml || '\u6e29\u99a8\u63d0\u793a'; // 温馨提示
	btncancel.innerHTML = config.cancelText || '\u53d6\u6d88'; // 取消 
	btnprimary.innerHTML = config.actionText || '\u786e\u5b9a'; // 确定
	content.innerHTML = config.contentHtml || '<center> Hello world !</center>'

	// 确定按钮 事件处理
	this.bind(btnprimary, 'onclick', function() {
		// alert('is ok ?');
		config.action && config.action.call(di);
	});
	// 取消按钮 事件处理
	this.bind(btncancel, 'onclick', function() {
		config.cancel && config.cancel.call(di);
		// 删除当前弹窗
		di.remove();
	});

	// 将元素添加到文档中
	this.append(panel, header);
	this.append(panel, content);
	this.append(panel, footer);
	this.append(footer, btnprimary);
	this.append(footer, btncancel);
	this.append(bg, panel);
	this.append(entity, bg);

	/*
	 * 删除弹窗
	 */
	di.remove = function() {
		_this.remove(bg);
	};

	return di;
}
_jss.fn.dragElement = function(entity, callback){
    var _drag = {},_this = this;
    //初始化
    _drag.init = function (o, callback){
        o.onmousedown = this.start;
        o.dragEnd = this.end;
        callback&&(o.___cback = callback);
    }
    //开始
    _drag.start = function (e){

        var o,e = _this.fixEvent(e);
        e.preventDefault && e.preventDefault();
        _drag.o = o = this;
        //this.style.position="absolute";
        o.x = e.clientX - _drag.o.offsetLeft;
        o.y = e.clientY - _drag.o.offsetTop;
        document.onmousemove = _drag.move;
        document.onmouseup = _drag.end;
    }
    //移动
    _drag.move = function (e){
        var oLeft,oTop,e = _this.fixEvent(e);
        oLeft = e.clientX - _drag.o.x;
        oTop = e.clientY - _drag.o.y;
        _drag.o.style.left = oLeft + 'px';
        _drag.o.style.top = oTop + 'px';
        _drag.o.___cback&&_drag.o.___cback.call(_drag.o,oLeft,oTop);
    }
    //结束
    _drag.end = function (){
      _drag.o = document.onmousemove = document.onmouseup = null;
    }

    //初始化入口
    _drag.init(entity, callback);

    return _drag;
}

_jss.fn.stopPropagation = function(ev){
	var e=window.event || event;
    if(e.stopPropagation){
        e.stopPropagation();
    }else{
        e.cancelBubble = true;
    }
}
/*
 * 安装事件
 */
_jss.fn.fixEvent = function(e){
    if(!window.event&&!e){
        var r,eventExec = "arguments.callee.caller";
        while(!r){
            eventExec += ".caller";
            r = eval(eventExec+".arguments[0]");
            r && (r.toString() != '[object MouseEvent]') && (r = null);
        }
        return r;
    }
    return (window.event || e);
}
/*
 * 事件绑定
 * @param arr 可以绑定一个dom 对象数组
 * @param type 事件类型如：onclick,onchange,onkeydown等
 * @param callback 回调方法
 */
_jss.fn.bind = function(arr, type, callback) {
    var _this = this;
    if(!arr)return ;
    if(!this.isCollection(arr)){
        arr = [arr];
    }
    for(var i = 0; i<arr.length; i++){
        var o = arr[i];
        if(typeof o != "object")continue;
        // o['_'+type] = callback;//缓存绑定的事件，方便日后解绑,因为解绑的事件必须与绑定的事件一至
        function fn(o){
            return function(e){
                callback && callback.call(o, e);
            }
        }
        o['_'+type] = fn(o);
        addEv(o);
    }
    function addEv(o){
        var fn = o['_'+type];
        if (o.attachEvent) {
            // IE6+
            o.attachEvent(type, fn, false);
        } else if (o.addEventListener) {
            // chrome,firefox
            o.addEventListener(type.substring(2), fn, false);
        } else {
            o[type] = fn;
        }
    }
}

/*
 * 事件解绑
 * @param arr
 * @param type 事件类型如：onclick,onchange,onkeydown等
 * [注]解绑时，o和callback函数必须与绑定时的相同
 */
_jss.fn.unbind = function(arr, type) {
    if(!arr)return ;
    if(!this.isCollection(arr)){
        arr = [arr];
    }
    for(var i = 0; i<arr.length; i++){
        var o = arr[i];
        if(typeof o != "object")continue;
        removeEv(o, o['_'+type]);
    }
    function removeEv(o, callback){
        if (o.removeEventListener) {
            o.removeEventListener(type.substring(2), callback, false);
        } else if (o.detachEvent) {
            o.detachEvent(type, callback||function(){});
        } else {
            o[type] = null;
        }
    }
}




_jss.fn.getElementsByClass = function(clazzName, entity){
	var cNames,
		cName,
		r = [],
		elems = entity ? entity.getElementsByTagName("*") : (document.all || document.getElementsByTagName("*"));
	for(var i = 0; i<elems.length; i++){
		cName = elems[i].className;//获取当前对象的类名
		if(cName){
			cNames = cName.split(" ");//类名存在，则进行拆分
			for(var j = 0; j<cNames.length; j++){
				if(cNames[j] && cNames[j] == clazzName){
					r.push(elems[i]);//类名存在且与指定的名相同，则存储对象
				}
			}
		}
	}
	elems=cNames=cName=null;
	return r;	
}
_jss.fn.getElementById = function(id, entity){
	var r = null, elems = null;
	if(entity){
		elems = entity.getElementsByTagName('*');
		for(var i = 0; i < elems.length; i++){
			var item = elems[i];
			if(item.id == id){
				return item;
			}
		}
	}else{
		r = document.getElementById(id);
	}	
	return r;	
}
_jss.fn.getElementsByTagName = function(tagName, entity){
	var r = [], elems = null;
	if(entity){
		elems = entity.getElementsByTagName('*');
		for(var i = 0; i < elems.length; i++){
			var item = elems[i];
			if(item.tagName == tagName.toLocaleUpperCase()){
				r.push(item);
			}
		}
	}else{
		r = document.getElementsByTagName(tagName);	
	}	
	return r;	
}

_jss.fn.hasClass = function(result, className){

	return new RegExp('(\\s|^)'+className+'(\\s|$)').test(result.className);
}
_jss.fn.inputTimer = function (input, onFocusCallback, onBlurCallback, time){
    //var input = document.getElementById('search_input');
    var inputPrevValue = input.value;
    input.onfocus=function(){
    	//开启timer 时时监控值的改变
        input._searchInputTimer = setInterval(function(){
            var currentValue = input.value;
            if(inputPrevValue != currentValue){
                inputPrevValue =  currentValue;
                onFocusCallback && onFocusCallback.call(input);
            }
        },time || 100);
    }
    input.onblur=function(){
    	//清除timer的监控
        if(input._searchInputTimer){
            clearInterval(input._searchInputTimer);
            input._searchInputTimer = null;
            onBlurCallback && onBlurCallback.call(input);
        }
    }
}
_jss.fn.isCollection = function(entity){

	return this.isArray(entity) || this.isHTMLCollection(entity);
}
/*
 * 判断是否为数组
 */
_jss.fn.isArray = function(entity){
    return Object.prototype.toString.call(entity) === "[object Array]";
},
/*
 * 判断是否为数组
 */
_jss.fn.isHTMLCollection = function(entity){
    return Object.prototype.toString.call(entity) === "[object HTMLCollection]" ||
           Object.prototype.toString.call(entity) === "[object NodeList]";
}
_jss.fn.isee = function(target, obj, isFind){
		//find();参数为空时，则查找所有
		if(isFind && !target && obj.result){
			obj.result = obj.result.getElementsByTagName('*');
			return obj;
		}
    	/*
		 * 参数为dom对象
    	 */
    	if(typeof target === 'object' && !target.isJss){
    		obj.result = target;
    		return obj;
    	}

    	// 备用名，过滤掉【# . 】等前缀
    	var xname = target ? target.substring(1) : '';

		/**
		 * 通过ID获取元素
		 * @param name 为元素 #id
		 */
		if(/^#[^\s]+$/.test(target)){

			obj.result = this.getElementById(xname, isFind ? obj.result : null);
			return obj;
		}

		/**
		 * 通过CLASS获取元素
		 * @param name 为元素 .className
		 */
		if(/^\.[^\s]+$/.test(target)){
			obj.result = isOneDom(this.getElementsByClass(xname, isFind ? obj.result : null));
			return obj;
		}

		/**
		 * 通过标签名获取元素
		 * @param name 为元素的标签名称如：div
		 */
		if(/^[a-zA-z0-9]+$/.test(target)){
			obj.result = isOneDom(this.getElementsByTagName(target, isFind ? obj.result : null));
			return obj;
		}
		
		/**
		 * 根据dom标签字符串创建dom元素
		 * @param name 为html标签名如：'<div>'
		 */
		if(/^\<[^\>\<]+\>$/.test(target)){
			var tagName = target.replace(/^\<+|\>+$/g,"").toLocaleLowerCase();
			obj.result = this.createElementByTagName(tagName);
			return obj;
		}	
		
		//数组里只有一个元素时，则只取这一个对象
	    function isOneDom(o){
	    	if(o && o.length == 1){
	    		return o[0];
	    	}else{
	    		return o;
	    	}
	    }

}
_jss.fn.loading = function(entity, config){
	var img =  document.createElement('img'), di = {}, _this = this;

	img.className = 'jss-loading-img';

	// 计算中心位置，方便设置loading在指定容器距中显示 
	var width = this.css(entity, 'width');//loading 父容器宽度
	var loadingCenter = (parseFloat(width)-35 )/2 + 'px'; //设置loading距中位置

	// loading图标样式
	var imgcss = {
		position: config.position || 'absolute',
		zIndex: config.zIndex || '99999999',
		margin: '0 auto',
		display: 'block', 
		left: config.left || loadingCenter,
		top: config.top || '100px'
	}
	// 设置
	this.css(img, imgcss);

	img.src = "data:image/gif;base64,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";

	this.append(entity, img);

	// 删除loading
	di.remove = function(){
		_this.remove(img);
	}

	return di;
}
_jss.fn.parent = function(result){
	var r = result.parentNode;
	while(!r.tagName) {
		r = r.parentNode;
		if(!r)return;
	}
	return r;
}

_jss.fn.queryUrlParam = function(name){
	var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var r = window.location.search.substr(1).match(reg);
    if (r !== null) return decodeURIComponent(r[2]); 
    return null;
}

_jss.fn.remove = function(result){
    if(!this.isCollection(result)){
        result = [result];
    }
    for(var i = 0; i<result.length; i++){
        this.parent(result[i]).removeChild(result[i]);
    }
}
_jss.fn.removeClass = function(arr, className){
	if(!this.isCollection(arr)){
	    arr = [arr];
	}
    for(var i = 0; i<arr.length; i++){
        var entity = arr[i];
        var entityClass = entity.className || "";
        if(entityClass && this.hasClass(entity, className)){
            entityClass = entityClass.replace(new RegExp('(\\s|^)'+className+'(\\s|$)')," ");
            entity.className = entityClass.trim();
        }
    }

}
_jss.fn.selector = function (name){
	var _this = {}, fn=this;

	/*
	 * jss对象标记
	 */
	_this.isJss = true;

	/**
	 * 获取原始dom元素
	 */
	_this.getDom = function(){
		return _this.result;
	}

	/**
	 * 向元素后加入元素
	 * @param obj 一个dom元素或一组元素
	 */
	_this.append = function(obj){
		if(obj.isJss){
			obj = obj.result;
		}
		if(obj && obj.length){
			for(var i = 0; i<obj.length; i++){
				fn.append(_this.result, obj[i]);
			}
		}else{
			fn.append(_this.result, obj);
		}
		return _this;
	}

	/**
	 * 获取元素的innerHTML
	 * @param text 参数存在时，则设置html
	 */
	_this.html = function(text){
		if(text){
			_this.result.innerHTML = text;
			return _this;
		}
		return _this.result.innerHTML;
	}

    /*
     * 是否包含指定的类名
     * @param className 类名
     */
    _this.hasClass = function(className){
         return fn.hasClass(
            filterArrFirst(_this.result), 
            className
         );
    }
    
	/*
     * 是否包含指定的类名
     * @param className 类名
     */
    _this.css = function(cssProperty){
        var r = fn.css(
            _this.result, 
            cssProperty
        );
        if(typeof cssProperty === 'string'){
            return r;
        }else{
            return _this;
        }
    }

	/*
     * 向元素中添加class样式
     * @param className 类名
     */
    _this.addClass = function(className){
    	fn.addClass(_this.result, className);
        return _this;
    }

    /*
     * 获取所有子节点，不包括孙节点
     */
    _this.children = function(){
    	_this.result = fn.children(_this.result);
    	return _this;
    }

	/*
     * 删除元素中class样式
     * @param className 类名
     */
    _this.removeClass = function(className){
    	fn.removeClass(_this.result, className);
        return _this;
    }

	/*
     * 获取和设置元素属性
     * @param value 属性名 或 属性json对象
     */
    _this.attr = function(value){
    	if(typeof value === 'string'){
    		return fn.getAttr(
    			filterArrFirst(_this.result), 
    			value
    		);
    	}else{
    		fn.setAttr(_this.result, value);
    		return _this;
    	}
    }
    
    /*
     * 获取父节点
     */
    _this.parent = function(){
        _this.result = fn.parent(
            filterArrFirst(_this.result)
        );
        return _this;
    }
    
    /*
	 * 从当前结果下所有子节点包括孙节点 中查找指定元素
     * @param index 选择器参数#id 或 .class 或 div标签名等, 参数为空时获取所有子节点及孙节点
     */
    _this.find = function( index ){
    	return fn.isee(index , _this, true);
    }

    /*
     * 获取当前元素的显示区信息，返回对象包含top,left,right,bottom,width,height
     */
    _this.clientRect = function(){
        return fn.clientRect(
            filterArrFirst(_this.result)
        );
    }
    
    /*
	 * 删除节点
     */
    _this.remove = function(){
    	fn.remove(_this.result);
    	return _this;
    }
    
    /*
	 * 切换样式
     */
    _this.toggleClass = function(className){
    	fn.toggleClass(_this.result, className);
    	return _this;
    }
    
    /*
	 * 事件绑定
	 * @param type   	事件类型，如：onclick, onkeyup,onkeydown ...
	 * @param callback  事件回调
     */
    _this.bind = function(type, callback){
    	fn.bind(_this.result, type, callback);
    	return _this;
    }
    
    /*
	 * 事件解绑定
	 * @param type   	事件类型，如：onclick, onkeyup,onkeydown ...
     */
    _this.unbind = function(type){
    	fn.unbind(_this.result, type);
    	return _this;
    }

    /*
     * 停止事件的传播，阻止它被分派到其他 Document 节点
     * @param e 事件源
     */
    _this.stopPropagation = function(e){
        fn.stopPropagation(e);
        return _this;
    }

    /**
     * 获取唯一编号
     */
    _this.uuid = function(){
        return fn.uuid();
    }
    
    /**
     * cookie设置和获取
     * @param opt cookie名字或设置cookie信息；如：{name:'', value:'', time:'过期时间'}
     */
    _this.cookie = function(opt){
        
        if(typeof opt === 'string'){
            //获取
            return fn.getCookie(opt);
        }else{
            //设置
            fn.setCookie(opt.name, opt.value, opt.time);
            return _this;
        }
    }

    /**
     * AJAX 请求
     * @param opt.url 请求地址
     * @param opt.success 成功回调
     * @param opt.error 失败回调
     * @param opt.type 请求方法 缺省值为GET
     * @param opt.data 请求参数
     * @param opt.header 设置请求头 {key: value}
     * @param opt.async 是否异步请求数据，缺省值为是
     */
    _this.ajax = function(opt){
        fn.ajax(opt);
        return _this;
    }

    /*
     * ie8跨域请求
     * @param opt.url   请求地址
     * @param opt.type  请求方法  POST 或 GET
     * @param opt.time  请求超时
     * @param opt.data  请求参数  json对象字符串
     */
    _this.xdr = function(opt){
        fn.xdr(opt);
        return _this;
    }

    /**
     * 监听输入框输入的值
     * @param input 输入框dom对象
     * @param onFocusCallback 获得焦点时回调
     * @param onBlurCallback  失去焦点时回调
     * @param time 监听频率 缺省值100毫秒
     */
    _this.inputTimer = function(onFocusCallback, onBlurCallback, time){
        fn.inputTimer(
            filterArrFirst(_this.result), 
            onFocusCallback, 
            onBlurCallback, 
            time
        );
        return _this;
    }

    /*
     * 使元素自由可拖拽
     * @param callback 回调
     * callback(left, top); //this为当前拖拽对象
     *【注】使用时请先将元素设置绝对定位！！！！
     */
    _this.drag = function(callback){
        fn.dragElement(
            filterArrFirst(_this.result),
            callback
        );
        return _this;
    }

    /**
     * 获取浏览器参数名称
     * @param name 浏览器地址参数名
     */
    _this.queryUrlParam = function(name){
        return fn.queryUrlParam(name);
    }

    /**
     * 打开弹窗
     * @param config 弹窗配制
     */
    _this.dialog = function(config){
       return fn.dialog(config, filterArrFirst(_this.result));
    }

    /*
     * 在指定区域添加loading效果
     */
    _this.loading = function(config){
       return fn.loading(filterArrFirst(_this.result), config);
    }
    
    /**
     * 克隆json对象
     * @param jsonobject json对象
     * @return 新的json对象
     */
    _this.clone = function(jsonobject){
        return fn.clone(jsonobject);
    }

    /*
     * 动态创建选项卡
     */
    _this.tabs = function(config){
        return fn.tabs(filterArrFirst(_this.result), config);
    }

    /*
     * 动态添加一个样式组
     * @param cssId 在当前文档中样式表唯一的ID，相同ID只允许设置一次
     * @param cssText 样式字符串
     * 动态添加<style></style>里的样式
        //动太样式
        var cssText = "\
        h3{\
            color:red;\
            border:1px solid green;\
            padding:10px;\
        }\
        ";
        例如： fn.addStyleSheet("bodyCssId", "body{color:red;}");
        设置完后会在head style标签中添加一个样式表
     */
    _this.addStyleSheet = function(cssId, cssText){
        return fn.addStyleSheet(cssId, cssText);
    }

    /**
     * 校验结果
     * 当结果为数组时返回第一个元素
     * [注]在必要的方法里使用 比如：hasClass,多个结果，只取第一个
     */
    function filterArrFirst(o){
    	if(o && o.length){
    		o = o[0];
    	}
    	return o;
    }
    

    return fn.isee(name , _this);
}

//+---------------------------------------------------------------------	
//|去所有空格
//+---------------------------------------------------------------------	
String.prototype.trims = function() {return this.replace(/[ ]/g,"");}
//+---------------------------------------------------------------------
//|去两边空格
//+---------------------------------------------------------------------
String.prototype.trim = function() {return this.replace(/^\s+|\s+$/g,"");}
//+---------------------------------------------------------------------
//|去左边空格
//+---------------------------------------------------------------------
String.prototype.ltrim = function() {return this.replace(/^\s+/,"");}
//+---------------------------------------------------------------------
//|去右边空格
//+---------------------------------------------------------------------
String.prototype.rtrim = function() {return this.replace(/\s+$/,"");}
_jss.fn.tabs = function(entity, config) {
	var xtab = document.createElement('div'),
		nav = document.createElement('ul'),
		content = document.createElement('div'),
		items = config.items || [];
	_this = this;
	//清楚浮动
	var clearCssText = '.jss_clearfix:before,.jss_clearfix:after{content:"";display:table;}.jss_clearfix:after{clear:both;zoom:1}';
	_this.addStyleSheet("clearTabs", clearCssText);
	// 设置类名
	xtab.className = "jss-tab-custom";
	nav.className = "jss-tab-nav jss_clearfix";
	content.className = "jss-tab-content";

	// 样式集
	var xtabcss = {
		margin: '0 auto',
		width: config.width || 'auto',
		height: config.height || 'auto',
		'box-sizing': 'border-box',
		height: 'auto',
		overflow: 'hidden',
		background: '#fff',
		'box-shadow': '0 1px 1px rgba(0,0,0,0.1)',
		'border-radius': '3px'
	};
	var customCssText = _this.toCssText(".jss-tab-custom", xtabcss);
	_this.addStyleSheet("contentTabs", customCssText);

	// tab nav ul .
	var navcss = {
		width: '100%',
		height: 'auto',
		margin: 0,
		padding: 0,
		'list-style': 'none',
		display: 'block',
		'box-sizing': 'border-box',
		'border-bottom-color': '#f4f4f4',
		'border-top-right-radius': '3px',
		'border-top-left-radius': '3px',
		'border-bottom': '1px solid #ddd'
	};
	var navCssText = _this.toCssText(".jss-tab-nav", navcss);
	_this.addStyleSheet("navTabs", navCssText);

	// nav li css . 
	var licss = {
		'box-sizing': 'border-box',
		'border-top': '3px solid transparent',
		'margin-bottom': '-1px',
		'margin-right': '5px',
		float: 'left',
		position: 'relative',
		display: 'inline-block'
	};
	var liCssText = _this.toCssText(".jss-tab-nav li", licss);
	_this.addStyleSheet("liTabs", liCssText);

	// nav li a css
	var liacss = {
		'box-sizing': 'border-box',
		background: 'transparent',
		margin: 0,
		color: '#444',
		'border-radius': 0,
		'line-height': '1.42857143',
		border: '1px solid transparent',
		position: 'relative',
		'text-decoration': 'none',
		display: 'block',
		padding: '10px 15px',
		cursor: 'pointer'
	};
	var liaCssText = _this.toCssText(".jss-tab-nav li a", liacss);
	_this.addStyleSheet("liaTabs", liaCssText);
	// li active css
	var licssActive = {
		'border-top': '3px solid transparent',
		'border-top-color': '#3c8dbc',
		'margin-bottom': '-2px',
		'margin-right': '5px',
		float: 'left',
		position: 'relative',
		'box-sizing': 'border-box',
		display: 'inline-block'
	}
	var licssActiveCssText = _this.toCssText(".jss-tab-nav .active", licssActive);
	_this.addStyleSheet("licssActiveTabs", licssActiveCssText);
	// li a active css
	var liacssActive = {
		color: '#444',
		background: '#fff',
		'border-radius': 0,
		border: '1px solid #ddd',
		'border-bottom-color': 'transparent',
		'border-top-color': 'transparent',
		'line-height': 1.42857143,
		position: 'relative',
		display: 'block',
		padding: '10px 15px',
		'box-sizing': 'border-box',
		'text-decoration': 'none',
		cursor: 'pointer',
		margin: 0

	}
	var liacssActiveCssText = _this.toCssText(".jss-tab-nav .active a", liacssActive);
	_this.addStyleSheet("liacssActiveTabs", liacssActiveCssText);
	// content css
	var contentcss = {
		width: '100%',
		height: 'auto',
		overflow: 'hidden',
		clear: 'both'
	}
	var contentCssText = _this.toCssText(".jss-tab-content", contentcss);
	_this.addStyleSheet("contentcssTabs", contentCssText);

	// 渲染tabs
	for (var i = 0; i < items.length; i++) {
		var item = items[i];
		var li = document.createElement('li');
		var lia = document.createElement('a');

		lia.innerHTML = item.title;
		lia['_content'] = item.content;
		lia['_callback'] = item.callback;

		lia['_li'] = li; // 缓存父节点li
		lia['_i'] = i; // 缓存当前索引 
		// set css .
		if (i === 0) {
			// 缺省第一个打开
			setActive(lia);
		}
		// tab nav onclick
		_this.bind(lia, 'onclick', function() {
			// 设置当前激活样式
			setActive(this);
			// 内容存在时设置内容
			if (this['_content']) {
				content.innerHTML = this['_content'];
			}
			// this 指向 a , 参数一为content dom 对象
			this['_callback'] && this['_callback'].call(this, content);
		});

		// append element.
		_this.append(li, lia);
		_this.append(nav, li);

	}

	// 将tab添加到指定元素上
	_this.append(xtab, nav);
	_this.append(xtab, content);
	_this.append(entity, xtab);

	/*
	 * 设置当前激活样式和内容
	 * @param a 当前 nav item a 
	 */
	function setActive(a) {
		var color = '#ddd';
		a['_li'].className = 'active';
		// 第一个nav清除左边框
		if (a['_i'] === 0) {
			color = 'transparent';
		}
		liacssActive['border-left-color'] = color;
		var old = content['_curAcNav'];
		if (old && old !== a) {
			//清除上一个激活对象
			old['_li'].className = '';
		}
		content['_curAcNav'] = a; // 缓存当前激活对象
		content.innerHTML = item.content; // 设置激活内容
	}

}
_jss.fn.toggleClass = function(result, className){
	if(!this.isCollection(result)){
        result = [result];
    }
    for(var i = 0; i<result.length; i++){
        var entity = result[i];
        var entityClass = entity.className || "";
        var newCName = "";
        if(entityClass && this.hasClass(entity, className)){
            newCName = entityClass.replace(new RegExp('(\\s|^)'+className+'(\\s|$)')," ");
        }else{
            newCName = (entityClass + " " + className);
        }
        newCName = newCName.replace(new RegExp('(\\s\\s)'), " "); //去掉连续空格
        entity.className = newCName;
    }
}
_jss.fn.uuid = function(){
	window._____uuid = (window._____uuid || 1000) + 1;
    return window._____uuid;
}
_jss.fn.xdr = function(opt){	

	var xdr;

    function alert_error(){
        alert("XDR onerror");
    }
    function alert_timeout(){
        alert("XDR ontimeout");
    }
    function alert_progress(){
        alert("XDR onprogress");
    }
    function req_abort(){
        if(xdr){
            xdr.abort(); // Abort XDR if the Stop button is pressed. 
        }
    }

    /*
	 * 请求
	 * @param url 		请求url
	 * @param metch 	请求方法
	 * @param data      请求参数字符串
	 * @param time      请求超时
     */
    function req_init(url, metch, time, data, callback) {
        var timeout = time || 10000;
        if (window.XDomainRequest) // Check whether the browser supports XDR. 
        {
            xdr = new XDomainRequest(); // Create a new XDR object.
            if (xdr)
            {
                // There is an error and the request cannot be completed. 
                // For example, the network is not available.
                xdr.onerror     = alert_error;
                        
                // This event is raised when the request reaches its timeout. 
                xdr.ontimeout   = alert_timeout;
                        
                // When the object starts returning data, the onprogress event 
                // is raised and the data can be retrieved by using responseText.
                xdr.onprogress  = alert_progress;
                       
                // When the object is complete, the onload event is raised and 
                // the responseText ensures the data is available. 
                xdr.onload      = function(){
                	callback && callback(xdr.responseText);
                };

                xdr.timeout     = timeout;
                        
                // The URL is preset in the text area. This is passed in the 
                // open call with a get request.
                xdr.open(metch || "GET", url);
                        
                // The request is then sent to the server.  
                xdr.send(data);
            } else {
                alert('Failed to create new XDR object.');
            }
        } else {
            alert('XDR does not exist.');
        }
    }

    //初始化入口
    req_init(opt.url, opt.type, opt.time, opt.data, opt.success);

}